AI Employee - Full Repository Specification
Project Overview
AI Employee is a multi-tenant SaaS mobile application (React Native / Expo) that provides businesses with AI-powered automation for customer communication across all channels. It serves as a "virtual employee" that handles inbound/outbound calls, chat messages, social media DMs, and lead captureâ€”all from a unified mobile dashboard.

Core Architecture
Tech Stack
Frontend: React Native (Expo) for iOS, Android, and Web
Backend: Express.js (TypeScript) REST API
Database: PostgreSQL with Drizzle ORM
Real-time: WebSockets (Socket.io) for live chat and notifications
AI/LLM: OpenAI GPT-4 for conversation AI, Whisper for voice transcription
Voice: Twilio for phone number provisioning and call handling
Messaging: Twilio SMS, Meta Graph API (Instagram/Facebook), WhatsApp Business API
Payments: Stripe for subscriptions and usage-based billing
Push Notifications: Expo Notifications
Multi-Tenant Design
Each business has a unique businessId and ownerToken for data isolation
All API routes are scoped to the authenticated business
Subscription tiers control feature access and usage limits
Database Schema
-- Core Business Tables
businesses (
  id UUID PRIMARY KEY,
  name TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  ownerToken TEXT UNIQUE NOT NULL,
  email TEXT,
  phone TEXT,
  website TEXT,
  subscriptionTier TEXT DEFAULT 'free', -- free, starter, pro, enterprise
  aiCreditsRemaining INTEGER DEFAULT 100,
  notificationsEnabled BOOLEAN DEFAULT true,
  createdAt TIMESTAMP DEFAULT NOW()
)
-- AI Agents
agents (
  id UUID PRIMARY KEY,
  businessId UUID REFERENCES businesses(id),
  name TEXT NOT NULL,
  type TEXT NOT NULL, -- 'voice', 'chat', 'sms'
  direction TEXT DEFAULT 'inbound', -- 'inbound', 'outbound'
  initialMessage TEXT,
  personality TEXT, -- System prompt for AI behavior
  isActive BOOLEAN DEFAULT true,
  pilotMode TEXT DEFAULT 'suggestive', -- 'off', 'suggestive', 'autopilot'
  createdAt TIMESTAMP DEFAULT NOW()
)
-- Agent Goals (what the agent should accomplish)
agentGoals (
  id UUID PRIMARY KEY,
  agentId UUID REFERENCES agents(id),
  goalType TEXT NOT NULL, -- 'collect_info', 'book_appointment', 'transfer_call', 'custom'
  fieldsToCollect TEXT[], -- ['name', 'email', 'phone', 'address', 'issue']
  customInstructions TEXT,
  priority INTEGER DEFAULT 0
)
-- Phone Numbers (Twilio provisioned)
phoneNumbers (
  id UUID PRIMARY KEY,
  businessId UUID REFERENCES businesses(id),
  agentId UUID REFERENCES agents(id),
  phoneNumber TEXT UNIQUE NOT NULL,
  twilioSid TEXT NOT NULL,
  isActive BOOLEAN DEFAULT true,
  createdAt TIMESTAMP DEFAULT NOW()
)
-- Conversations (unified inbox)
conversations (
  id UUID PRIMARY KEY,
  businessId UUID REFERENCES businesses(id),
  agentId UUID REFERENCES agents(id),
  channel TEXT NOT NULL, -- 'phone', 'sms', 'whatsapp', 'instagram', 'facebook', 'webchat'
  contactName TEXT,
  contactEmail TEXT,
  contactPhone TEXT,
  status TEXT DEFAULT 'active', -- 'active', 'resolved', 'transferred'
  sentiment TEXT, -- 'positive', 'neutral', 'negative'
  summary TEXT, -- AI-generated conversation summary
  createdAt TIMESTAMP DEFAULT NOW(),
  updatedAt TIMESTAMP DEFAULT NOW()
)
-- Messages
messages (
  id UUID PRIMARY KEY,
  conversationId UUID REFERENCES conversations(id),
  role TEXT NOT NULL, -- 'user', 'agent', 'system'
  content TEXT NOT NULL,
  audioUrl TEXT, -- For voice messages
  wasAutoGenerated BOOLEAN DEFAULT false,
  wasApproved BOOLEAN, -- For suggestive mode
  createdAt TIMESTAMP DEFAULT NOW()
)
-- Bot Training Data
trainingData (
  id UUID PRIMARY KEY,
  businessId UUID REFERENCES businesses(id),
  type TEXT NOT NULL, -- 'qa_pair', 'website_crawl', 'document'
  question TEXT,
  answer TEXT,
  sourceUrl TEXT,
  embedding VECTOR(1536), -- For semantic search
  createdAt TIMESTAMP DEFAULT NOW()
)
-- Integrations (OAuth tokens for third-party services)
integrations (
  id UUID PRIMARY KEY,
  businessId UUID REFERENCES businesses(id),
  provider TEXT NOT NULL, -- 'google', 'facebook', 'instagram', 'whatsapp', 'stripe'
  accessToken TEXT,
  refreshToken TEXT,
  expiresAt TIMESTAMP,
  status TEXT DEFAULT 'disconnected', -- 'connected', 'disconnected', 'error'
  metadata JSONB,
  createdAt TIMESTAMP DEFAULT NOW()
)
-- Usage & Analytics
usageLogs (
  id UUID PRIMARY KEY,
  businessId UUID REFERENCES businesses(id),
  type TEXT NOT NULL, -- 'ai_message', 'voice_minute', 'sms_sent', 'call_made'
  quantity INTEGER DEFAULT 1,
  creditsUsed INTEGER,
  createdAt TIMESTAMP DEFAULT NOW()
)
App Screens & Navigation
Tab Navigation (5 Tabs)
Dashboard - Overview metrics, recent activity, quick actions
Inbox - Unified conversation view across all channels
Agents - Manage AI agents (voice, chat, SMS)
Training - Bot training, Q&A pairs, website crawler
Settings - Business profile, integrations, billing
Screen Breakdown
Dashboard Tab
DashboardScreen: Revenue/leads overview, active conversations count, AI credits remaining, weekly activity chart
Inbox Tab
InboxScreen: List of all conversations with filters (channel, status, date)
ConversationDetailScreen: Full chat view with message history, ability to take over from AI, approve/reject suggested responses
Agents Tab
AgentsListScreen: List of all AI agents with status indicators
CreateAgentScreen: Multi-step wizard
Step 1: Agent Details (name, business name, direction, initial message)
Step 2: Agent Goals (basic mode: checkboxes, advanced mode: custom prompts)
Step 3: Phone Details (select or provision a phone number)
AgentDetailScreen: View/edit agent settings, view call logs, toggle pilot mode
Training Tab
TrainingOverviewScreen: Stats on training data, Q&A count, websites crawled
QAPairsScreen: List of question/answer pairs, add/edit/delete
WebCrawlerScreen: Enter URL, crawl website, review extracted data
BotTrialScreen: Test the AI bot with your training data
Settings Tab
SettingsScreen: Business profile, notification preferences
IntegrationsScreen: Connect Google, Facebook, Instagram, WhatsApp, Stripe
BillingScreen: Current plan, usage, upgrade options
PhoneNumbersScreen: Manage provisioned phone numbers
TeamScreen: Invite staff members (future feature)
API Endpoints
Authentication
POST /api/businesses - Create/register business
GET /api/businesses/:id - Get business details
Agents
GET /api/businesses/:businessId/agents - List all agents
POST /api/businesses/:businessId/agents - Create new agent
GET /api/agents/:id - Get agent details
PATCH /api/agents/:id - Update agent
DELETE /api/agents/:id - Delete agent
Agent Goals
GET /api/agents/:agentId/goals - Get agent goals
POST /api/agents/:agentId/goals - Add goal
PATCH /api/goals/:id - Update goal
DELETE /api/goals/:id - Delete goal
Phone Numbers
GET /api/businesses/:businessId/phone-numbers - List phone numbers
POST /api/businesses/:businessId/phone-numbers/provision - Provision new number from Twilio
PATCH /api/phone-numbers/:id - Assign to agent
DELETE /api/phone-numbers/:id - Release number
Conversations
GET /api/businesses/:businessId/conversations - List conversations (with filters)
GET /api/conversations/:id - Get conversation with messages
POST /api/conversations/:id/messages - Send message (manual takeover)
PATCH /api/conversations/:id - Update status
Training Data
GET /api/businesses/:businessId/training - List training data
POST /api/businesses/:businessId/training/qa - Add Q&A pair
POST /api/businesses/:businessId/training/crawl - Crawl website
DELETE /api/training/:id - Delete training data
Integrations
GET /api/businesses/:businessId/integrations - List integrations
POST /api/businesses/:businessId/integrations/:provider/connect - Start OAuth flow
POST /api/businesses/:businessId/integrations/:provider/callback - OAuth callback
DELETE /api/integrations/:id - Disconnect integration
Webhooks (for external services)
POST /api/webhooks/twilio/voice - Incoming call handler
POST /api/webhooks/twilio/sms - Incoming SMS handler
POST /api/webhooks/twilio/status - Call status updates
POST /api/webhooks/meta/instagram - Instagram DM webhook
POST /api/webhooks/meta/facebook - Facebook Messenger webhook
POST /api/webhooks/whatsapp - WhatsApp incoming message
AI Processing
POST /api/ai/generate-response - Generate AI response for a conversation
POST /api/ai/transcribe - Transcribe voice message
POST /api/ai/summarize - Generate conversation summary
Key Features Implementation
1. Pilot Modes
type PilotMode = 'off' | 'suggestive' | 'autopilot';
// Off: AI is disabled, all messages are manual
// Suggestive: AI generates responses, human approves before sending
// Autopilot: AI sends responses automatically
2. Voice Call Flow (Twilio)
Incoming call triggers /api/webhooks/twilio/voice
Server responds with TwiML to stream audio
Audio is transcribed via OpenAI Whisper
Transcription is sent to GPT-4 with agent's system prompt
Response is converted to speech via TTS
Response audio is played back to caller
Loop continues until call ends or transfer is triggered
3. Unified Inbox
All channels (phone, SMS, WhatsApp, Instagram, Facebook, webchat) appear in one list
Each conversation shows: contact name, channel icon, last message, timestamp, status
Real-time updates via WebSocket
4. Bot Training
Q&A Pairs: Direct question/answer mapping for common queries
Website Crawler: Extract FAQ content from business website
Semantic Search: Use embeddings to find relevant training data for each user query
UI/UX Guidelines
Design System
Color Palette: Premium black & white with accent color (customizable per business)
Typography: Clean, oversized hierarchy (SF Pro / Inter)
Animations: Spring physics with 300-400ms transitions
Haptics: Light, Medium, Heavy feedback on all interactive elements
iOS 26 Liquid Glass Design
Frosted glass effect on navigation and cards
Subtle blur and tint
Dynamic light reflection animations
Component Library
Card - Elevated container with glass effect
Button - Primary, secondary, destructive variants
Input - Text, phone, email with validation
AgentCard - Agent preview with status indicator
ConversationRow - Inbox list item with channel icon
MessageBubble - Chat message with AI/human indicator
PilotModeSelector - Three-way toggle (Off/Suggestive/Autopilot)
Third-Party Integrations
Required API Keys (store as secrets)
OPENAI_API_KEY - GPT-4 and Whisper
TWILIO_ACCOUNT_SID - Voice and SMS
TWILIO_AUTH_TOKEN - Voice and SMS
META_APP_ID - Facebook/Instagram OAuth
META_APP_SECRET - Facebook/Instagram OAuth
WHATSAPP_BUSINESS_TOKEN - WhatsApp Cloud API
STRIPE_SECRET_KEY - Payments
STRIPE_WEBHOOK_SECRET - Stripe webhooks
RESEND_API_KEY - Email notifications
Replit Integrations to Use
stripe - Payment processing and subscriptions
javascript_database - PostgreSQL database
openai - AI/LLM access
Subscription Tiers
Feature	Free	Starter ($29/mo)	Pro ($97/mo)	Enterprise
AI Credits/mo	100	1,000	5,000	Unlimited
Agents	1	3	10	Unlimited
Phone Numbers	0	1	3	Unlimited
Channels	Webchat only	+ SMS	+ All	+ All
Voice Minutes	0	100	500	Unlimited
Team Members	1	3	10	Unlimited
Priority Support	No	No	Yes	Dedicated
Project Structure
/client
  /app                    # Expo Router app directory
  /components             # Reusable UI components
    /ui                   # Base components (Button, Card, Input)
    /agents               # Agent-specific components
    /inbox                # Conversation/message components
    /training             # Training data components
  /constants              # Colors, spacing, typography
  /hooks                  # Custom hooks
  /lib                    # API client, query client, utilities
  /navigation             # Navigator definitions
  /screens                # Screen components
  /types                  # TypeScript type definitions
/server
  /middleware             # Auth, rate limiting
  /routes                 # API route handlers
  /services               # Business logic (AI, Twilio, webhooks)
  /webhooks               # Webhook handlers
  db.ts                   # Database connection
  storage.ts              # Data access layer
  index.ts                # Server entry point
/shared
  schema.ts               # Drizzle schema definitions
Getting Started Checklist
 Set up PostgreSQL database
 Configure Drizzle ORM with schema
 Create Express server with auth middleware
 Build multi-step agent creation wizard
 Integrate Twilio for phone number provisioning
 Set up OpenAI for conversation AI
 Build unified inbox with WebSocket updates
 Implement pilot modes (off/suggestive/autopilot)
 Create bot training interface (Q&A, web crawler)
 Add Stripe subscriptions
 Connect Meta APIs (Instagram, Facebook)
 Build WhatsApp integration
 Add usage tracking and billing
 Deploy to production
Success Metrics
Response Time: AI responses generated in < 2 seconds
Transcription Accuracy: > 95% accuracy on voice transcription
Uptime: 99.9% availability
User Satisfaction: > 4.5 star app store rating
This specification serves as a complete blueprint for building the AI Employee multi-tenant SaaS application.